Тестовое задание:

# Первая часть
Разработать веб-приложение для оплаты билетов. Приложение должно состоять из HTTP API и логики проведения заявок.

**API:**
API работает в JSON формате и состоит из двух сервисов:
* Сервис приема заявок на оплату. Получает, валидирует и сохраняет заявку в БД.
На вход принимает номер маршрута и дату время отправления.
На выход отдает (в случае успеха) идентификатор заявки.

* Сервис проверки статуса заявки. Получает данные по заявке из БД.
На вход принимает идентификатор заявки.
На выход отдает статус заявки.

Логика проведения заявок
Процесс проведения оплаты (запускается раз в минуту):
* выбирает заявку, подходящую для проведения, из БД
* отправляет в http-сервис (сервис можно реализовать в этом же приложении отдельным endpoint-ом) платежного шлюза запрос, который случайным образом возвращает статусы (обрабатывается, ошибка, проведен)
* Обновляет статус заявки
Статусы "Ошибка" или "Проведен" являются конечными, т.е. повторение запроса не требуется

# Вторая часть
1. Доработать сервис приема заявок на оплату:
а) Необходимо добавить на вход сервиса обязательное поле - идентификатор клиента.
Реализовать сервис получения всех заявок по идентификатору клиента, дата отправления которых находится в будущем (> now). Полученные заявки необходимо отсортировать по дате отправления от ближайшей к дальнейшей. Сортировку необходимо реализовать на уровне API (не sql).
б) Необходимо учесть, что при приеме заявок возможны отправки дублей от внешнего комплекса. Например: два раза случайно отправили одну и ту же заявку на оплату в итоге платеж задублировался. Придумать и реализовать способ отсекать дубли в сервисе приема заявок на оплату.
Подсказка: можно добавить уникальность каждой заявки от внешнего комплекса, например - идентификатор билета.

2. Доработать процесс проведения заявок:
а) Необходимо учесть, что во время работы процесса в любой точке может произойти сбой или рестарт приложения. Придумать и реализовать способ подчищать поломанные заявки в случае такого сбоя и актуализировать статус этих заявок до конечного. В качестве проверки статуса платежа можно использовать текущий http-сервис платежного шлюза.
Подсказка: можно создать дополнительный статус - "начал обрабатывать" или "взял в обработку".

3. Сделать процесс проведения заявок многопоточным. Необходимо создать возможность управления количеством потоков из конфигурации приложения.

# Заметки автора
1. На начальных этапах тестирования были использованы эти данные(в таблице видны платежи с одинаковым ticket_id для имитации дубляжа билетов, а так же начальное значение статуса платежа - null).
![ticket-api](https://user-images.githubusercontent.com/52357295/92331553-3b530c80-f080-11ea-9950-8da9364f5344.png)
2. Поместить такое количество разнообразных id в одну таблицу tickets является временным решением, в последующих обновлениях планируется разбить её на большее количество таблиц, связанных между собой.
***
* Update v2.0 - Однопоточный вариант обработки билетов
* Update v3.0 - Попытка сделать обработку многопоточной
